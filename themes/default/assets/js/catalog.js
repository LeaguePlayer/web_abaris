// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    var changeCategory, filterListView;
    $.show_abaris_box('.login-form');
    if ($('.model-desc').length > 0) {
      $.show_abaris_box('.model-desc', {
        onUpdate: function() {
          return this.wrap.css('position', 'fixed');
        }
      });
    }
    if ($('.scroller').length > 0) {
      $('.scroller').baron({
        scroller: '.scroller',
        container: '.scroll-container',
        bar: '.scroller__bar',
        track: '.scroller__track',
        barOnCls: 'baron'
      });
    }
    $('.add-auto').on('click', function() {
      var item, modal;
      modal = $(this).closest('.inline-modal');
      item = modal.find('.auto-item').eq(0).clone().addClass('clone-auto');
      item.find('input').val('');
      modal.find('.auto-items').append(item);
      return $.fancybox.reposition();
    });
    changeCategory = function() {
      return $('select.select_category').change(function(e) {
        $.ajax({
          url: window.location.href,
          type: 'GET',
          data: {
            cat: $(this).val(),
            prevRootCat: $(this).data('prev')
          },
          success: function(data) {
            $('.catalog-container').first().replaceWith(data);
            changeCategory();
            return filterListView('details-list');
          }
        });
        return false;
      });
    };
    changeCategory();
    filterListView = function(listId) {
      var form;
      form = $("#" + listId).prev('.catalog-grid-header').find('form');
      form.submit(function() {
        $.fn.yiiListView.update("" + listId, {
          data: $(this).serialize()
        });
        return false;
      });
      return form.find('input:text').keyup(function(e) {
        if (e.keyCode === 13) {
          form.submit();
        }
        return false;
      });
    };
    $('.list-view').each(function() {
      return filterListView($(this).attr('id'));
    });
    return $('#details-list .price p').click(function() {
      return $.cart_push($(this).data('id'));
    });
    /*$('.catalog-grid-row').each () ->
    		max_height = 0
    		$(@).find('.field').each ()->
    			height = $(@).height()
    			max_height = height if max_height < height
    		$(@).find('.field').height(max_height)
    */

  });

}).call(this);

/*
//@ sourceMappingURL=catalog.map
*/
